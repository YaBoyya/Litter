{% extends 'base.html' %}
{% load static %}

{% block cssjs %}
<link rel="stylesheet" href="{% static 'core/css/post-template.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'core/css/post-details.css' %}" type="text/css">
{% endblock %}

{% block content %}
<ul class="container-list">
  <li>
    {% include 'core/post-template.html' %}
  </li>
  <li class="center edit-status-list">
    {% if request.user == post.user %}
    <a id="edit-button" class="button" href="{% url 'core:post-edit' post.id %}">Edit</a>
    {% endif %}
    {% if post.was_edited %}
    <bold>Edited</bold>
    {% endif %}
    <small>{{ post.views }} views</small>
  </li>
  {% if request.user.is_authenticated %}
  <li class="center">
    <form method='POST'>
      {% csrf_token %}
      {{ form.as_p }}
      <input type="submit" hidden>
    </form>
  </li>
  {% endif %}
</ul>
<div>
  {% for comment in post.comment.all %}
  <br><hr>
  <p>
  <img src="{{ comment.user.picture.url }}">
  {{ comment.user.usertag }}, {{ comment.created|timesince }}
  {% if comment.was_edited %}
  <small><bold>Edited</bold></small>
  {% endif %}
  {% if request.user == comment.user%}
  <a href="{% url 'core:comment-edit' comment.id %}">Edit</a>
  <a href="{% url 'core:comment-delete' comment.id %}">Delete</a>
  {% endif %}
  </p>
  {{ comment.text }}
  <br>
  <a href="{% url 'core:comment-vote' comment.id %}">Vote</a>
  {{ comment.vote_count }}
  {% endfor %}
</div>
{% endblock %}
