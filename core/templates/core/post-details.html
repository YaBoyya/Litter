{% extends 'base.html' %}
{% load static %}
{% load cache %}

{% block cssjs %}
<link rel="stylesheet" href="{% static 'core/css/post-template.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'core/css/comment-template.css' %}" type="text/css">
<link rel="stylesheet" href="{% static 'core/css/post-details.css' %}" type="text/css">
<script type="text/javascript" src="{% static 'core/js/post-template.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container">
  {% include 'core/post-template.html' %}
</div>
{% cache 10 comments %}
<ul class="post-list container-list">
  {% for comment in comments %}
  <li id="{{ comment.id }}">
    {% include 'core/comment-template.html' %}
  </li>
  {% endfor %}
</ul>
{% endcache %}
{% endblock %}

{% block rightbar %}
<small>{{ post.views }} views</small>
{% if request.user.is_authenticated %}
<form method='POST'>
  {% csrf_token %}
  {{ form.as_p }}
  <input type="submit" hidden>
</form>
{% endif %}
{% endblock %}
